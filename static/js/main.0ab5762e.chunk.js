(this.webpackJsonpbreakout=this.webpackJsonpbreakout||[]).push([[0],{16:function(e,t,n){},17:function(e){e.exports=JSON.parse('[{"lives":5,"paddleWidth":3.5,"speed":1,"blocks":[[0,0,1,1,0,0],[0,0,1,1,0,0],[0,0,0,0,0,0]]},{"lives":4,"paddleWidth":3,"speed":1.4,"blocks":[[0,0,1,2,1,0,0],[0,0,1,0,1,0,0],[0,0,1,0,1,0,0],[0,0,1,0,1,0,0]]},{"lives":3,"paddleWidth":2.5,"speed":1.8,"blocks":[[0,0,1,1,1,1,0,0],[0,0,1,1,1,1,0,0],[0,0,2,1,1,2,0,0],[0,0,2,1,1,2,0,0],[0,0,1,2,2,1,0,0]]},{"lives":3,"paddleWidth":2,"speed":2.2,"blocks":[[0,1,1,2,3,2,1,1,0],[0,1,1,2,1,2,1,1,0],[0,1,1,2,1,2,1,1,0],[0,1,1,2,1,2,1,1,0],[0,1,1,2,1,2,1,1,0],[0,1,1,2,1,2,1,1,0]]}]')},19:function(e,t,n){"use strict";n.r(t);var i,r=n(2),c=n(9),a=n.n(c),o=(n(16),n(6)),u=n(3),s=n(0),l=n(17),h=n(10),d=n(11),f=n(7),b=function(e){return Object(f.a)(Array(e).keys())},v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},j=function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}},O=function(){function e(t,n){Object(h.a)(this,e),this.x=t,this.y=n}return Object(d.a)(e,[{key:"scaleBy",value:function(t){return new e(this.x*t,this.y*t)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}},{key:"add",value:function(t){var n=t.x,i=t.y;return new e(this.x+n,this.y+i)}},{key:"normalize",value:function(){return this.scaleBy(1/this.length())}},{key:"subtract",value:function(t){var n=t.x,i=t.y;return new e(this.x-n,this.y-i)}},{key:"dotProduct",value:function(e){var t=e.x,n=e.y;return this.x*t+this.y*n}},{key:"projectOn",value:function(t){var n=this.dotProduct(t)/t.length();return new e(n*t.x,n*t.y)}},{key:"reflect",value:function(e){return this.subtract(this.projectOn(e).scaleBy(2))}},{key:"rotate",value:function(t){var n=function(e){return e*Math.PI/180}(t),i=Math.cos(n),r=Math.sin(n);return new e(this.x*i-this.y*r,this.x*r+this.y*i)}},{key:"crossProduct",value:function(e){var t=e.x,n=e.y;return this.x*n-t*this.y}},{key:"angleBetween",value:function(e){return 180*Math.atan2(this.crossProduct(e),this.dotProduct(e))/Math.PI}}]),e}(),p=1/3,y=p,w="LEFT",g="RIGHT",m=new O(-1,0),x=new O(1,0),k=new O(0,-1),E=new O(0,1),z=m.add(k).normalize(),I=x.add(k).normalize(),T=function(e,t,n){var i=t-y;return{paddle:{position:new O((e-n)/2,i),width:n,height:y},ball:{center:new O(t/2,i-.4),radius:.2,direction:v(z,I)}}},N=function(e){var t,n=e.lives,i=e.paddleWidth,r=e.speed,c=e.blocks,a=c[0].length,o=a,u=(o-.3333333333333333*o-c.length*p)/2,l=c.map((function(e,t){return e.map((function(e,n){return{density:e,position:new O(n,u+t*p),width:1,height:p}}))})),h={width:a,height:o};return Object(s.a)(Object(s.a)({size:h,blocks:(t=l,t.reduce((function(e,t){return[].concat(Object(f.a)(e),Object(f.a)(t))}),[]))},T(a,o,i)),{},{lives:n,speed:r})},B=function(e,t,n,i){return e>=n&&e<=i||t>=n&&t<=i},M=function(e,t,n){var i=e.size,r=e.speed,c=e.lives,a=.005*n*r,o=function(e,t,n,i){if(!i)return e;var r=i===w?m:x,c=e.position.add(r.scaleBy(n)).x,a=function(t){return Object(s.a)(Object(s.a)({},e),{},{position:new O(t,e.position.y)})};return c<0?a(0):c+e.width>t.width?a(t.width-e.width):a(c)}(e.paddle,i,a,t),u=e.ball.radius,l=e.ball.direction,h=e.ball.center.add(l.scaleBy(a)),d=h.y+u;if(d>i.height)return Object(s.a)(Object(s.a)(Object(s.a)({},e),T(i.width,i.height,o.width)),{},{lives:c-1});var f=function(t){return Object(s.a)(Object(s.a)({},e),{},{paddle:o,ball:Object(s.a)(Object(s.a)({},e.ball),t)})},b=function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,i=e.angleBetween(t),r=90-n;if(i<0){if(i>-n)return e.rotate(-n);if(i<-r)return e.rotate(-r)}else{if(i<n)return e.rotate(n);if(i>r)return e.rotate(r)}return t}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=function(){return Math.random()*t-t/2},i=new O(n(),n());return e.add(i).normalize()}(l.reflect(e)));return f({direction:t})},v=h.x-u,j=h.x+u,p=h.y-u,y=o.position.x,g=y+o.width,z=o.position.y;if(Math.abs(k.angleBetween(l))>90&&d>=z&&j>=y&&v<=g)return b(k);if(p<=0)return b(E);if(v<=0)return b(x);if(j>=i.width)return b(m);var I,N,M=e.blocks.find((function(e){var t=e.position,n=e.width,i=e.height;return B(p,d,t.y,t.y+i)&&B(v,j,t.x,t.x+n)}));if(M){var D=M.density-1,S=Object(s.a)(Object(s.a)({},M),{},{density:D}),P=D<0?(I=e.blocks,N=M,I.filter((function(e){return e!==N}))):function(e,t,n){return e.map((function(e){return e===t?n:e}))}(e.blocks,M,S);return Object(s.a)(Object(s.a)({},b(function(){var e=M.position.y,t=e+M.height,n=M.position.x;if(p>e-u&&d<t+u){if(v<n)return m;if(j>n+M.width)return x}return p>e?E:p<=e?k:void 0}())),{},{blocks:P})}return f({center:h})},D=n(1),S=function(e){var t=e.level,n=e.unit;return Object(D.jsxs)("text",{x:n,y:2*n,fontSize:n,className:"level",children:["LEVEL: ",t]})},P=function(e){var t=e.lives,n=e.containerWidth,i=e.unit,r=2*i;return b(t).map((function(e){return Object(D.jsx)("rect",{className:"life",rx:i/4,height:i,width:r,y:i,x:n-i-r*(e+1)-i/2*e},e)}))},W=b(3).map((function(e){return"rgba(26, 188, 156, ".concat(1/(3-e),")")})),L=function(e){var t=e.x,n=e.y,i=e.width,r=e.height,c=e.density;return Object(D.jsx)("rect",{className:"block",fill:W[c],x:t,y:n,width:i,height:r})},R=function(e){var t=e.x,n=e.y,i=e.width,r=e.height;return Object(D.jsx)("rect",{className:"paddle",x:t,y:n,width:i,height:r})},V=function(e){var t=e.x,n=e.y,i=e.radius;return Object(D.jsx)("circle",{className:"ball",cx:t,cy:n,r:i})},A={LEFT:[65,37],RIGHT:[68,39]},C=function(e,t){var n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return{projectDistance:function(e){return e*r},projectVector:function(e){return e.scaleBy(r)}}},G=function(e){var t=function(){var e=localStorage.getItem("level");return e?parseInt(e,10):0}(),n=N(l[t]),i=C(e,n.size);return{level:t,game:n,containerSize:e,projectDistance:i.projectDistance,projectVector:i.projectVector,time:Date.now(),stopTime:void 0,movement:void 0}},H="CONTAINER_SIZE_CHANGE",_="KEY_DOWN",F="KEY_UP",J="TICK",K=(i={},Object(u.a)(i,H,(function(e,t){return Object(s.a)(Object(s.a)({},e),{},{containerSize:t},C(t,e.game.size))})),Object(u.a)(i,_,(function(e,t){return A.LEFT.includes(t)?Object(s.a)(Object(s.a)({},e),{},{movement:w}):A.RIGHT.includes(t)?Object(s.a)(Object(s.a)({},e),{},{movement:g}):e})),Object(u.a)(i,F,(function(e,t){var n=Object(s.a)(Object(s.a)({},e),{},{movement:void 0});return 32===t?e.stopTime?Object(s.a)(Object(s.a)({},n),{},{stopTime:void 0,time:e.time+Date.now()-e.stopTime}):Object(s.a)(Object(s.a)({},n),{},{stopTime:Date.now()}):n})),Object(u.a)(i,J,(function(e){if(e.stopTime)return e;var t=Date.now(),n=M(e.game,e.movement,t-e.time),i=Object(s.a)(Object(s.a)({},e),{},{time:t});if(n.lives<1)return Object(s.a)(Object(s.a)({},i),{},{game:N(l[e.level])});if(n.blocks.length<1){var r=e.level===l.length?e.level:e.level+1;localStorage.setItem("level",r);var c=N(l[e.level]);return Object(s.a)(Object(s.a)({},i),{},{level:r,game:c},C(e.containerSize,c.size))}return Object(s.a)(Object(s.a)({},i),{},{game:n})})),i),Y=function(e,t){var n=t.type,i=t.payload,r=K[n];return r?r(e,i):e},U=function(e){var t=Object(r.useReducer)(Y,e,G),n=Object(o.a)(t,2),i=n[0],c=n[1],a=function(e,t){return c({type:e,payload:t})},u=i.projectDistance,l=i.projectVector,h=i.level,d=i.game,f=d.blocks,b=d.paddle,v=d.ball,O=d.size,p=O.width,y=O.height,w=d.lives;Object(r.useEffect)((function(){return a(H,e)}),[e]),Object(r.useEffect)((function(){var e=setInterval((function(){return a(J)}),16.666666666666668),t=j("keydown",(function(e){var t=e.which;return a(_,t)})),n=j("keyup",(function(e){var t=e.which;return a(F,t)}));return function(){clearInterval(e),t(),n()}}),[]);var g=u(p),m=u(v.radius);return Object(D.jsxs)("svg",{width:g,height:u(y),className:"scene",children:[Object(D.jsx)(S,{unit:m,level:h+1}),Object(D.jsx)(P,{lives:w,containerWidth:g,unit:m}),f.map((function(e){var t=e.density,n=e.position,i=e.width,r=e.height;return Object(D.jsx)(L,Object(s.a)({density:t,width:u(i),height:u(r)},l(n)),"".concat(n.x,"-").concat(n.y))})),Object(D.jsx)(R,Object(s.a)({width:u(b.width),height:u(b.height)},l(b.position))),Object(D.jsx)(V,Object(s.a)(Object(s.a)({},l(v.center)),{},{radius:m}))]})},Z=function(){var e=Object(r.useRef)(),t=Object(r.useState)(),n=Object(o.a)(t,2),i=n[0],c=n[1];return Object(r.useEffect)((function(){var t=function(){var t=e.current.getBoundingClientRect(),n=t.width,i=t.height;c({width:n,height:i})},n=j("resize",t);return t(),n}),[]),Object(D.jsx)("div",{className:"page",children:Object(D.jsx)("div",{className:"scene-container",ref:e,children:i&&Object(D.jsx)(U,{width:i.width,height:i.height})})})};a.a.render(Object(D.jsx)(Z,{}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0ab5762e.chunk.js.map